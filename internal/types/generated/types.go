// Code generated by github.com/atombender/go-jsonschema, DO NOT EDIT.

package generated

import "time"

// Status of the currently executing task
type ActiveTaskStatus struct {
	// Currently executing tool (if any)
	ActiveTool *ActiveToolRecord `json:"activeTool,omitempty" yaml:"activeTool,omitempty" mapstructure:"activeTool,omitempty"`

	// ISO timestamp of last update
	LastUpdated time.Time `json:"lastUpdated" yaml:"lastUpdated" mapstructure:"lastUpdated"`

	// Current metrics
	Metrics MetricsRecord `json:"metrics" yaml:"metrics" mapstructure:"metrics"`

	// Number of API turns so far
	NumTurns int `json:"numTurns" yaml:"numTurns" mapstructure:"numTurns"`

	// Current execution status
	Status string `json:"status" yaml:"status" mapstructure:"status"`

	// ID of the task being executed
	TickId string `json:"tickId" yaml:"tickId" mapstructure:"tickId"`

	// Task title
	Title string `json:"title" yaml:"title" mapstructure:"title"`
}

// Active tool during a live run
type ActiveToolRecord struct {
	// Duration so far in milliseconds
	DurationMs *int `json:"duration_ms,omitempty" yaml:"duration_ms,omitempty" mapstructure:"duration_ms,omitempty"`

	// Tool input (may be partial)
	Input *string `json:"input,omitempty" yaml:"input,omitempty" mapstructure:"input,omitempty"`

	// Whether the tool has errored
	IsError *bool `json:"is_error,omitempty" yaml:"is_error,omitempty" mapstructure:"is_error,omitempty"`

	// Tool name
	Name string `json:"name" yaml:"name" mapstructure:"name"`

	// Tool output (may be partial)
	Output *string `json:"output,omitempty" yaml:"output,omitempty" mapstructure:"output,omitempty"`
}

// Response from GET /api/activity
type ActivityResponse struct {
	// List of activity entries
	Activities []ActivitySchema `json:"activities" yaml:"activities" mapstructure:"activities"`
}

// Activity log entry tracking changes to ticks
type ActivitySchema struct {
	// Type of action (create, update, close, approve, reject, etc.)
	Action string `json:"action" yaml:"action" mapstructure:"action"`

	// Who performed the action (user name or agent)
	Actor string `json:"actor" yaml:"actor" mapstructure:"actor"`

	// Additional action-specific data
	Data ActivitySchemaData `json:"data,omitempty" yaml:"data,omitempty" mapstructure:"data,omitempty"`

	// Parent epic ID if the tick belongs to an epic
	Epic *string `json:"epic,omitempty" yaml:"epic,omitempty" mapstructure:"epic,omitempty"`

	// ID of the tick this activity is about
	Tick string `json:"tick" yaml:"tick" mapstructure:"tick"`

	// ISO timestamp when the activity occurred
	Ts time.Time `json:"ts" yaml:"ts" mapstructure:"ts"`
}

// Additional action-specific data
type ActivitySchemaData map[string]interface{}

// Request body for POST /api/ticks/:id/note
type AddNoteRequest struct {
	// Note content to add
	Message string `json:"message" yaml:"message" mapstructure:"message"`
}

// Response from POST /api/ticks/:id/note
type AddNoteResponse struct {
	// Criteria that must be met for completion
	AcceptanceCriteria *string `json:"acceptance_criteria,omitempty" yaml:"acceptance_criteria,omitempty" mapstructure:"acceptance_criteria,omitempty"`

	// Current wait state - what the tick is waiting for
	Awaiting *TickAwaiting `json:"awaiting,omitempty" yaml:"awaiting,omitempty" mapstructure:"awaiting,omitempty"`

	// IDs of ticks that block this one
	BlockedBy []string `json:"blocked_by,omitempty" yaml:"blocked_by,omitempty" mapstructure:"blocked_by,omitempty"`

	// ISO timestamp when the tick was closed
	ClosedAt *time.Time `json:"closed_at,omitempty" yaml:"closed_at,omitempty" mapstructure:"closed_at,omitempty"`

	// Reason for closing (e.g., completed, wont-fix, duplicate)
	ClosedReason *string `json:"closed_reason,omitempty" yaml:"closed_reason,omitempty" mapstructure:"closed_reason,omitempty"`

	// Computed kanban column
	Column TickColumn `json:"column" yaml:"column" mapstructure:"column"`

	// ISO timestamp when the tick was created
	CreatedAt time.Time `json:"created_at" yaml:"created_at" mapstructure:"created_at"`

	// Who created this tick
	CreatedBy string `json:"created_by" yaml:"created_by" mapstructure:"created_by"`

	// ISO timestamp - tick is deferred until this time
	DeferUntil *time.Time `json:"defer_until,omitempty" yaml:"defer_until,omitempty" mapstructure:"defer_until,omitempty"`

	// Detailed description of the work to be done
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// ID of tick during which this tick was discovered
	DiscoveredFrom *string `json:"discovered_from,omitempty" yaml:"discovered_from,omitempty" mapstructure:"discovered_from,omitempty"`

	// Reference to external issue tracker (e.g., GitHub issue URL)
	ExternalRef *string `json:"external_ref,omitempty" yaml:"external_ref,omitempty" mapstructure:"external_ref,omitempty"`

	// Unique identifier for the tick
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Whether this tick is blocked
	IsBlocked bool `json:"isBlocked" yaml:"isBlocked" mapstructure:"isBlocked"`

	// Optional labels for categorization
	Labels []string `json:"labels,omitempty" yaml:"labels,omitempty" mapstructure:"labels,omitempty"`

	// Legacy field - use awaiting instead. True means awaiting=work
	Manual *bool `json:"manual,omitempty" yaml:"manual,omitempty" mapstructure:"manual,omitempty"`

	// Timestamped notes appended during work
	Notes *string `json:"notes,omitempty" yaml:"notes,omitempty" mapstructure:"notes,omitempty"`

	// Updated parsed notes
	NotesList []Note `json:"notesList" yaml:"notesList" mapstructure:"notesList"`

	// Who is responsible for this tick (agent or human)
	Owner string `json:"owner" yaml:"owner" mapstructure:"owner"`

	// Parent epic ID if this tick belongs to an epic
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (0=highest, 4=lowest)
	Priority int `json:"priority" yaml:"priority" mapstructure:"priority"`

	// Pre-declared gate that must be satisfied before closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// ISO timestamp when the tick entered in_progress status
	StartedAt *time.Time `json:"started_at,omitempty" yaml:"started_at,omitempty" mapstructure:"started_at,omitempty"`

	// Status corresponds to the JSON schema field "status".
	Status TickStatus `json:"status" yaml:"status" mapstructure:"status"`

	// Short title describing the work item
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type corresponds to the JSON schema field "type".
	Type TickType `json:"type" yaml:"type" mapstructure:"type"`

	// ISO timestamp when the tick was last updated
	UpdatedAt time.Time `json:"updated_at" yaml:"updated_at" mapstructure:"updated_at"`

	// Human response to an awaiting state
	Verdict *TickVerdict `json:"verdict,omitempty" yaml:"verdict,omitempty" mapstructure:"verdict,omitempty"`
}

// Response from POST /api/ticks/:id/approve
type ApproveTickResponse struct {
	// Criteria that must be met for completion
	AcceptanceCriteria *string `json:"acceptance_criteria,omitempty" yaml:"acceptance_criteria,omitempty" mapstructure:"acceptance_criteria,omitempty"`

	// Current wait state - what the tick is waiting for
	Awaiting *TickAwaiting `json:"awaiting,omitempty" yaml:"awaiting,omitempty" mapstructure:"awaiting,omitempty"`

	// IDs of ticks that block this one
	BlockedBy []string `json:"blocked_by,omitempty" yaml:"blocked_by,omitempty" mapstructure:"blocked_by,omitempty"`

	// Whether the tick was closed as a result of approval
	Closed bool `json:"closed" yaml:"closed" mapstructure:"closed"`

	// ISO timestamp when the tick was closed
	ClosedAt *time.Time `json:"closed_at,omitempty" yaml:"closed_at,omitempty" mapstructure:"closed_at,omitempty"`

	// Reason for closing (e.g., completed, wont-fix, duplicate)
	ClosedReason *string `json:"closed_reason,omitempty" yaml:"closed_reason,omitempty" mapstructure:"closed_reason,omitempty"`

	// Computed kanban column
	Column TickColumn `json:"column" yaml:"column" mapstructure:"column"`

	// ISO timestamp when the tick was created
	CreatedAt time.Time `json:"created_at" yaml:"created_at" mapstructure:"created_at"`

	// Who created this tick
	CreatedBy string `json:"created_by" yaml:"created_by" mapstructure:"created_by"`

	// ISO timestamp - tick is deferred until this time
	DeferUntil *time.Time `json:"defer_until,omitempty" yaml:"defer_until,omitempty" mapstructure:"defer_until,omitempty"`

	// Detailed description of the work to be done
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// ID of tick during which this tick was discovered
	DiscoveredFrom *string `json:"discovered_from,omitempty" yaml:"discovered_from,omitempty" mapstructure:"discovered_from,omitempty"`

	// Reference to external issue tracker (e.g., GitHub issue URL)
	ExternalRef *string `json:"external_ref,omitempty" yaml:"external_ref,omitempty" mapstructure:"external_ref,omitempty"`

	// Unique identifier for the tick
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Whether this tick is blocked
	IsBlocked bool `json:"isBlocked" yaml:"isBlocked" mapstructure:"isBlocked"`

	// Optional labels for categorization
	Labels []string `json:"labels,omitempty" yaml:"labels,omitempty" mapstructure:"labels,omitempty"`

	// Legacy field - use awaiting instead. True means awaiting=work
	Manual *bool `json:"manual,omitempty" yaml:"manual,omitempty" mapstructure:"manual,omitempty"`

	// Timestamped notes appended during work
	Notes *string `json:"notes,omitempty" yaml:"notes,omitempty" mapstructure:"notes,omitempty"`

	// Who is responsible for this tick (agent or human)
	Owner string `json:"owner" yaml:"owner" mapstructure:"owner"`

	// Parent epic ID if this tick belongs to an epic
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (0=highest, 4=lowest)
	Priority int `json:"priority" yaml:"priority" mapstructure:"priority"`

	// Pre-declared gate that must be satisfied before closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// ISO timestamp when the tick entered in_progress status
	StartedAt *time.Time `json:"started_at,omitempty" yaml:"started_at,omitempty" mapstructure:"started_at,omitempty"`

	// Status corresponds to the JSON schema field "status".
	Status TickStatus `json:"status" yaml:"status" mapstructure:"status"`

	// Short title describing the work item
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type corresponds to the JSON schema field "type".
	Type TickType `json:"type" yaml:"type" mapstructure:"type"`

	// ISO timestamp when the tick was last updated
	UpdatedAt time.Time `json:"updated_at" yaml:"updated_at" mapstructure:"updated_at"`

	// Human response to an awaiting state
	Verdict *TickVerdict `json:"verdict,omitempty" yaml:"verdict,omitempty" mapstructure:"verdict,omitempty"`
}

// Details about a blocking tick
type BlockerDetail struct {
	// Blocker tick ID
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Blocker tick status
	Status string `json:"status" yaml:"status" mapstructure:"status"`

	// Blocker tick title
	Title string `json:"title" yaml:"title" mapstructure:"title"`
}

// Union of all messages sent from clients to server/DO
type ClientMessage interface{}

// Request body for POST /api/ticks/:id/close
type CloseTickRequest struct {
	// Reason for closing
	Reason *string `json:"reason,omitempty" yaml:"reason,omitempty" mapstructure:"reason,omitempty"`
}

// Response from POST /api/ticks/:id/close
type CloseTickResponse struct {
	// Criteria that must be met for completion
	AcceptanceCriteria *string `json:"acceptance_criteria,omitempty" yaml:"acceptance_criteria,omitempty" mapstructure:"acceptance_criteria,omitempty"`

	// Current wait state - what the tick is waiting for
	Awaiting *TickAwaiting `json:"awaiting,omitempty" yaml:"awaiting,omitempty" mapstructure:"awaiting,omitempty"`

	// IDs of ticks that block this one
	BlockedBy []string `json:"blocked_by,omitempty" yaml:"blocked_by,omitempty" mapstructure:"blocked_by,omitempty"`

	// ISO timestamp when the tick was closed
	ClosedAt *time.Time `json:"closed_at,omitempty" yaml:"closed_at,omitempty" mapstructure:"closed_at,omitempty"`

	// Reason for closing (e.g., completed, wont-fix, duplicate)
	ClosedReason *string `json:"closed_reason,omitempty" yaml:"closed_reason,omitempty" mapstructure:"closed_reason,omitempty"`

	// Computed kanban column
	Column TickColumn `json:"column" yaml:"column" mapstructure:"column"`

	// ISO timestamp when the tick was created
	CreatedAt time.Time `json:"created_at" yaml:"created_at" mapstructure:"created_at"`

	// Who created this tick
	CreatedBy string `json:"created_by" yaml:"created_by" mapstructure:"created_by"`

	// ISO timestamp - tick is deferred until this time
	DeferUntil *time.Time `json:"defer_until,omitempty" yaml:"defer_until,omitempty" mapstructure:"defer_until,omitempty"`

	// Detailed description of the work to be done
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// ID of tick during which this tick was discovered
	DiscoveredFrom *string `json:"discovered_from,omitempty" yaml:"discovered_from,omitempty" mapstructure:"discovered_from,omitempty"`

	// Reference to external issue tracker (e.g., GitHub issue URL)
	ExternalRef *string `json:"external_ref,omitempty" yaml:"external_ref,omitempty" mapstructure:"external_ref,omitempty"`

	// Unique identifier for the tick
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Whether this tick is blocked
	IsBlocked bool `json:"isBlocked" yaml:"isBlocked" mapstructure:"isBlocked"`

	// Optional labels for categorization
	Labels []string `json:"labels,omitempty" yaml:"labels,omitempty" mapstructure:"labels,omitempty"`

	// Legacy field - use awaiting instead. True means awaiting=work
	Manual *bool `json:"manual,omitempty" yaml:"manual,omitempty" mapstructure:"manual,omitempty"`

	// Timestamped notes appended during work
	Notes *string `json:"notes,omitempty" yaml:"notes,omitempty" mapstructure:"notes,omitempty"`

	// Who is responsible for this tick (agent or human)
	Owner string `json:"owner" yaml:"owner" mapstructure:"owner"`

	// Parent epic ID if this tick belongs to an epic
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (0=highest, 4=lowest)
	Priority int `json:"priority" yaml:"priority" mapstructure:"priority"`

	// Pre-declared gate that must be satisfied before closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// ISO timestamp when the tick entered in_progress status
	StartedAt *time.Time `json:"started_at,omitempty" yaml:"started_at,omitempty" mapstructure:"started_at,omitempty"`

	// Status corresponds to the JSON schema field "status".
	Status TickStatus `json:"status" yaml:"status" mapstructure:"status"`

	// Short title describing the work item
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type corresponds to the JSON schema field "type".
	Type TickType `json:"type" yaml:"type" mapstructure:"type"`

	// ISO timestamp when the tick was last updated
	UpdatedAt time.Time `json:"updated_at" yaml:"updated_at" mapstructure:"updated_at"`

	// Human response to an awaiting state
	Verdict *TickVerdict `json:"verdict,omitempty" yaml:"verdict,omitempty" mapstructure:"verdict,omitempty"`
}

// Server confirms WebSocket connection
type ConnectedMessage struct {
	// ConnectionId corresponds to the JSON schema field "connectionId".
	ConnectionId string `json:"connectionId" yaml:"connectionId" mapstructure:"connectionId"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// Request body for POST /api/ticks
type CreateTickRequest struct {
	// Detailed description
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// Parent epic ID
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (defaults to 2)
	Priority *int `json:"priority,omitempty" yaml:"priority,omitempty" mapstructure:"priority,omitempty"`

	// Pre-declared gate for closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// Title of the new tick
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type of tick (defaults to task)
	Type *TickType `json:"type,omitempty" yaml:"type,omitempty" mapstructure:"type,omitempty"`
}

// Response from POST /api/ticks
type CreateTickResponse struct {
	// Criteria that must be met for completion
	AcceptanceCriteria *string `json:"acceptance_criteria,omitempty" yaml:"acceptance_criteria,omitempty" mapstructure:"acceptance_criteria,omitempty"`

	// Current wait state - what the tick is waiting for
	Awaiting *TickAwaiting `json:"awaiting,omitempty" yaml:"awaiting,omitempty" mapstructure:"awaiting,omitempty"`

	// IDs of ticks that block this one
	BlockedBy []string `json:"blocked_by,omitempty" yaml:"blocked_by,omitempty" mapstructure:"blocked_by,omitempty"`

	// ISO timestamp when the tick was closed
	ClosedAt *time.Time `json:"closed_at,omitempty" yaml:"closed_at,omitempty" mapstructure:"closed_at,omitempty"`

	// Reason for closing (e.g., completed, wont-fix, duplicate)
	ClosedReason *string `json:"closed_reason,omitempty" yaml:"closed_reason,omitempty" mapstructure:"closed_reason,omitempty"`

	// Computed kanban column
	Column TickColumn `json:"column" yaml:"column" mapstructure:"column"`

	// ISO timestamp when the tick was created
	CreatedAt time.Time `json:"created_at" yaml:"created_at" mapstructure:"created_at"`

	// Who created this tick
	CreatedBy string `json:"created_by" yaml:"created_by" mapstructure:"created_by"`

	// ISO timestamp - tick is deferred until this time
	DeferUntil *time.Time `json:"defer_until,omitempty" yaml:"defer_until,omitempty" mapstructure:"defer_until,omitempty"`

	// Detailed description of the work to be done
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// ID of tick during which this tick was discovered
	DiscoveredFrom *string `json:"discovered_from,omitempty" yaml:"discovered_from,omitempty" mapstructure:"discovered_from,omitempty"`

	// Reference to external issue tracker (e.g., GitHub issue URL)
	ExternalRef *string `json:"external_ref,omitempty" yaml:"external_ref,omitempty" mapstructure:"external_ref,omitempty"`

	// Unique identifier for the tick
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Whether this tick is blocked
	IsBlocked bool `json:"isBlocked" yaml:"isBlocked" mapstructure:"isBlocked"`

	// Optional labels for categorization
	Labels []string `json:"labels,omitempty" yaml:"labels,omitempty" mapstructure:"labels,omitempty"`

	// Legacy field - use awaiting instead. True means awaiting=work
	Manual *bool `json:"manual,omitempty" yaml:"manual,omitempty" mapstructure:"manual,omitempty"`

	// Timestamped notes appended during work
	Notes *string `json:"notes,omitempty" yaml:"notes,omitempty" mapstructure:"notes,omitempty"`

	// Who is responsible for this tick (agent or human)
	Owner string `json:"owner" yaml:"owner" mapstructure:"owner"`

	// Parent epic ID if this tick belongs to an epic
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (0=highest, 4=lowest)
	Priority int `json:"priority" yaml:"priority" mapstructure:"priority"`

	// Pre-declared gate that must be satisfied before closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// ISO timestamp when the tick entered in_progress status
	StartedAt *time.Time `json:"started_at,omitempty" yaml:"started_at,omitempty" mapstructure:"started_at,omitempty"`

	// Status corresponds to the JSON schema field "status".
	Status TickStatus `json:"status" yaml:"status" mapstructure:"status"`

	// Short title describing the work item
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type corresponds to the JSON schema field "type".
	Type TickType `json:"type" yaml:"type" mapstructure:"type"`

	// ISO timestamp when the tick was last updated
	UpdatedAt time.Time `json:"updated_at" yaml:"updated_at" mapstructure:"updated_at"`

	// Human response to an awaiting state
	Verdict *TickVerdict `json:"verdict,omitempty" yaml:"verdict,omitempty" mapstructure:"verdict,omitempty"`
}

// Summary info about an epic for dropdown lists
type EpicInfo struct {
	// Epic ID
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Epic title
	Title string `json:"title" yaml:"title" mapstructure:"title"`
}

// Error notification
type ErrorMessage struct {
	// Message corresponds to the JSON schema field "message".
	Message string `json:"message" yaml:"message" mapstructure:"message"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// Detailed tick response with parsed notes and blocker details
type GetTickResponse struct {
	// Criteria that must be met for completion
	AcceptanceCriteria *string `json:"acceptance_criteria,omitempty" yaml:"acceptance_criteria,omitempty" mapstructure:"acceptance_criteria,omitempty"`

	// Current wait state - what the tick is waiting for
	Awaiting *TickAwaiting `json:"awaiting,omitempty" yaml:"awaiting,omitempty" mapstructure:"awaiting,omitempty"`

	// IDs of ticks that block this one
	BlockedBy []string `json:"blocked_by,omitempty" yaml:"blocked_by,omitempty" mapstructure:"blocked_by,omitempty"`

	// Details about blocking ticks
	BlockerDetails []BlockerDetail `json:"blockerDetails" yaml:"blockerDetails" mapstructure:"blockerDetails"`

	// ISO timestamp when the tick was closed
	ClosedAt *time.Time `json:"closed_at,omitempty" yaml:"closed_at,omitempty" mapstructure:"closed_at,omitempty"`

	// Reason for closing (e.g., completed, wont-fix, duplicate)
	ClosedReason *string `json:"closed_reason,omitempty" yaml:"closed_reason,omitempty" mapstructure:"closed_reason,omitempty"`

	// Computed kanban column
	Column TickColumn `json:"column" yaml:"column" mapstructure:"column"`

	// ISO timestamp when the tick was created
	CreatedAt time.Time `json:"created_at" yaml:"created_at" mapstructure:"created_at"`

	// Who created this tick
	CreatedBy string `json:"created_by" yaml:"created_by" mapstructure:"created_by"`

	// ISO timestamp - tick is deferred until this time
	DeferUntil *time.Time `json:"defer_until,omitempty" yaml:"defer_until,omitempty" mapstructure:"defer_until,omitempty"`

	// Detailed description of the work to be done
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// ID of tick during which this tick was discovered
	DiscoveredFrom *string `json:"discovered_from,omitempty" yaml:"discovered_from,omitempty" mapstructure:"discovered_from,omitempty"`

	// Reference to external issue tracker (e.g., GitHub issue URL)
	ExternalRef *string `json:"external_ref,omitempty" yaml:"external_ref,omitempty" mapstructure:"external_ref,omitempty"`

	// Unique identifier for the tick
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Whether this tick is blocked
	IsBlocked bool `json:"isBlocked" yaml:"isBlocked" mapstructure:"isBlocked"`

	// Optional labels for categorization
	Labels []string `json:"labels,omitempty" yaml:"labels,omitempty" mapstructure:"labels,omitempty"`

	// Legacy field - use awaiting instead. True means awaiting=work
	Manual *bool `json:"manual,omitempty" yaml:"manual,omitempty" mapstructure:"manual,omitempty"`

	// Timestamped notes appended during work
	Notes *string `json:"notes,omitempty" yaml:"notes,omitempty" mapstructure:"notes,omitempty"`

	// Parsed notes from tick.notes
	NotesList []Note `json:"notesList" yaml:"notesList" mapstructure:"notesList"`

	// Who is responsible for this tick (agent or human)
	Owner string `json:"owner" yaml:"owner" mapstructure:"owner"`

	// Parent epic ID if this tick belongs to an epic
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (0=highest, 4=lowest)
	Priority int `json:"priority" yaml:"priority" mapstructure:"priority"`

	// Pre-declared gate that must be satisfied before closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// ISO timestamp when the tick entered in_progress status
	StartedAt *time.Time `json:"started_at,omitempty" yaml:"started_at,omitempty" mapstructure:"started_at,omitempty"`

	// Status corresponds to the JSON schema field "status".
	Status TickStatus `json:"status" yaml:"status" mapstructure:"status"`

	// Short title describing the work item
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type corresponds to the JSON schema field "type".
	Type TickType `json:"type" yaml:"type" mapstructure:"type"`

	// ISO timestamp when the tick was last updated
	UpdatedAt time.Time `json:"updated_at" yaml:"updated_at" mapstructure:"updated_at"`

	// Human response to an awaiting state
	Verdict *TickVerdict `json:"verdict,omitempty" yaml:"verdict,omitempty" mapstructure:"verdict,omitempty"`
}

// Heartbeat ping
type HeartbeatMessage struct {
	// Token corresponds to the JSON schema field "token".
	Token *string `json:"token,omitempty" yaml:"token,omitempty" mapstructure:"token,omitempty"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// Heartbeat pong
type HeartbeatResponseMessage struct {
	// Unix timestamp when session expires
	ExpiresAt int `json:"expiresAt" yaml:"expiresAt" mapstructure:"expiresAt"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// Response from GET /api/info
type InfoResponse struct {
	// List of epics for dropdown
	Epics []EpicInfo `json:"epics" yaml:"epics" mapstructure:"epics"`

	// Full repository name (owner/repo[:worktree])
	RepoName string `json:"repoName" yaml:"repoName" mapstructure:"repoName"`
}

// Response from GET /api/ticks
type ListTicksResponse struct {
	// List of ticks matching the query
	Ticks []TickResponse `json:"ticks" yaml:"ticks" mapstructure:"ticks"`
}

// Live run record for in-progress execution
type LiveRecord struct {
	// Currently executing tool
	ActiveTool *ActiveToolRecord `json:"active_tool,omitempty" yaml:"active_tool,omitempty" mapstructure:"active_tool,omitempty"`

	// Last update timestamp
	LastUpdated time.Time `json:"last_updated" yaml:"last_updated" mapstructure:"last_updated"`

	// Current metrics
	Metrics MetricsRecord `json:"metrics" yaml:"metrics" mapstructure:"metrics"`

	// Model being used
	Model string `json:"model" yaml:"model" mapstructure:"model"`

	// Number of turns so far
	NumTurns int `json:"num_turns" yaml:"num_turns" mapstructure:"num_turns"`

	// Output so far
	Output string `json:"output" yaml:"output" mapstructure:"output"`

	// Session identifier
	SessionId string `json:"session_id" yaml:"session_id" mapstructure:"session_id"`

	// When the run started
	StartedAt time.Time `json:"started_at" yaml:"started_at" mapstructure:"started_at"`

	// Current status
	Status string `json:"status" yaml:"status" mapstructure:"status"`

	// Thinking content so far
	Thinking *string `json:"thinking,omitempty" yaml:"thinking,omitempty" mapstructure:"thinking,omitempty"`

	// Completed tool invocations
	Tools []ToolRecord `json:"tools,omitempty" yaml:"tools,omitempty" mapstructure:"tools,omitempty"`
}

// Local agent online/offline status
type LocalStatusMessage struct {
	// Connected corresponds to the JSON schema field "connected".
	Connected bool `json:"connected" yaml:"connected" mapstructure:"connected"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// Token and cost metrics for an agent run
type MetricsRecord struct {
	// Number of tokens written to cache
	CacheCreationTokens int `json:"cache_creation_tokens" yaml:"cache_creation_tokens" mapstructure:"cache_creation_tokens"`

	// Number of tokens read from cache
	CacheReadTokens int `json:"cache_read_tokens" yaml:"cache_read_tokens" mapstructure:"cache_read_tokens"`

	// Total cost in USD
	CostUsd float64 `json:"cost_usd" yaml:"cost_usd" mapstructure:"cost_usd"`

	// Total duration in milliseconds
	DurationMs int `json:"duration_ms" yaml:"duration_ms" mapstructure:"duration_ms"`

	// Number of input tokens consumed
	InputTokens int `json:"input_tokens" yaml:"input_tokens" mapstructure:"input_tokens"`

	// Number of output tokens generated
	OutputTokens int `json:"output_tokens" yaml:"output_tokens" mapstructure:"output_tokens"`
}

// Parsed note entry from tick.notes
type Note struct {
	// Note author (human or agent)
	Author *string `json:"author,omitempty" yaml:"author,omitempty" mapstructure:"author,omitempty"`

	// Note content
	Text string `json:"text" yaml:"text" mapstructure:"text"`

	// Timestamp portion (YYYY-MM-DD HH:MM)
	Timestamp *string `json:"timestamp,omitempty" yaml:"timestamp,omitempty" mapstructure:"timestamp,omitempty"`
}

// Request body for POST /api/ticks/:id/reject
type RejectTickRequest struct {
	// Feedback explaining why the tick was rejected
	Feedback *string `json:"feedback,omitempty" yaml:"feedback,omitempty" mapstructure:"feedback,omitempty"`
}

// Response from POST /api/ticks/:id/reject
type RejectTickResponse struct {
	// Criteria that must be met for completion
	AcceptanceCriteria *string `json:"acceptance_criteria,omitempty" yaml:"acceptance_criteria,omitempty" mapstructure:"acceptance_criteria,omitempty"`

	// Current wait state - what the tick is waiting for
	Awaiting *TickAwaiting `json:"awaiting,omitempty" yaml:"awaiting,omitempty" mapstructure:"awaiting,omitempty"`

	// IDs of ticks that block this one
	BlockedBy []string `json:"blocked_by,omitempty" yaml:"blocked_by,omitempty" mapstructure:"blocked_by,omitempty"`

	// Whether the tick was closed as a result of rejection
	Closed bool `json:"closed" yaml:"closed" mapstructure:"closed"`

	// ISO timestamp when the tick was closed
	ClosedAt *time.Time `json:"closed_at,omitempty" yaml:"closed_at,omitempty" mapstructure:"closed_at,omitempty"`

	// Reason for closing (e.g., completed, wont-fix, duplicate)
	ClosedReason *string `json:"closed_reason,omitempty" yaml:"closed_reason,omitempty" mapstructure:"closed_reason,omitempty"`

	// Computed kanban column
	Column TickColumn `json:"column" yaml:"column" mapstructure:"column"`

	// ISO timestamp when the tick was created
	CreatedAt time.Time `json:"created_at" yaml:"created_at" mapstructure:"created_at"`

	// Who created this tick
	CreatedBy string `json:"created_by" yaml:"created_by" mapstructure:"created_by"`

	// ISO timestamp - tick is deferred until this time
	DeferUntil *time.Time `json:"defer_until,omitempty" yaml:"defer_until,omitempty" mapstructure:"defer_until,omitempty"`

	// Detailed description of the work to be done
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// ID of tick during which this tick was discovered
	DiscoveredFrom *string `json:"discovered_from,omitempty" yaml:"discovered_from,omitempty" mapstructure:"discovered_from,omitempty"`

	// Reference to external issue tracker (e.g., GitHub issue URL)
	ExternalRef *string `json:"external_ref,omitempty" yaml:"external_ref,omitempty" mapstructure:"external_ref,omitempty"`

	// Unique identifier for the tick
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Whether this tick is blocked
	IsBlocked bool `json:"isBlocked" yaml:"isBlocked" mapstructure:"isBlocked"`

	// Optional labels for categorization
	Labels []string `json:"labels,omitempty" yaml:"labels,omitempty" mapstructure:"labels,omitempty"`

	// Legacy field - use awaiting instead. True means awaiting=work
	Manual *bool `json:"manual,omitempty" yaml:"manual,omitempty" mapstructure:"manual,omitempty"`

	// Timestamped notes appended during work
	Notes *string `json:"notes,omitempty" yaml:"notes,omitempty" mapstructure:"notes,omitempty"`

	// Who is responsible for this tick (agent or human)
	Owner string `json:"owner" yaml:"owner" mapstructure:"owner"`

	// Parent epic ID if this tick belongs to an epic
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (0=highest, 4=lowest)
	Priority int `json:"priority" yaml:"priority" mapstructure:"priority"`

	// Pre-declared gate that must be satisfied before closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// ISO timestamp when the tick entered in_progress status
	StartedAt *time.Time `json:"started_at,omitempty" yaml:"started_at,omitempty" mapstructure:"started_at,omitempty"`

	// Status corresponds to the JSON schema field "status".
	Status TickStatus `json:"status" yaml:"status" mapstructure:"status"`

	// Short title describing the work item
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type corresponds to the JSON schema field "type".
	Type TickType `json:"type" yaml:"type" mapstructure:"type"`

	// ISO timestamp when the tick was last updated
	UpdatedAt time.Time `json:"updated_at" yaml:"updated_at" mapstructure:"updated_at"`

	// Human response to an awaiting state
	Verdict *TickVerdict `json:"verdict,omitempty" yaml:"verdict,omitempty" mapstructure:"verdict,omitempty"`
}

// Run event payload data
type RunEventData struct {
	// ActiveTool corresponds to the JSON schema field "activeTool".
	ActiveTool *RunEventTool `json:"activeTool,omitempty" yaml:"activeTool,omitempty" mapstructure:"activeTool,omitempty"`

	// Iteration corresponds to the JSON schema field "iteration".
	Iteration *int `json:"iteration,omitempty" yaml:"iteration,omitempty" mapstructure:"iteration,omitempty"`

	// Human-readable message
	Message *string `json:"message,omitempty" yaml:"message,omitempty" mapstructure:"message,omitempty"`

	// Metrics corresponds to the JSON schema field "metrics".
	Metrics *RunEventMetrics `json:"metrics,omitempty" yaml:"metrics,omitempty" mapstructure:"metrics,omitempty"`

	// Number of API turns
	NumTurns *int `json:"numTurns,omitempty" yaml:"numTurns,omitempty" mapstructure:"numTurns,omitempty"`

	// Current output text
	Output *string `json:"output,omitempty" yaml:"output,omitempty" mapstructure:"output,omitempty"`

	// Status text
	Status *string `json:"status,omitempty" yaml:"status,omitempty" mapstructure:"status,omitempty"`

	// Success corresponds to the JSON schema field "success".
	Success *bool `json:"success,omitempty" yaml:"success,omitempty" mapstructure:"success,omitempty"`

	// Number of tasks (context events)
	TaskCount *int `json:"taskCount,omitempty" yaml:"taskCount,omitempty" mapstructure:"taskCount,omitempty"`

	// Timestamp corresponds to the JSON schema field "timestamp".
	Timestamp time.Time `json:"timestamp" yaml:"timestamp" mapstructure:"timestamp"`

	// Token count (context events)
	TokenCount *int `json:"tokenCount,omitempty" yaml:"tokenCount,omitempty" mapstructure:"tokenCount,omitempty"`

	// Type corresponds to the JSON schema field "type".
	Type RunEventType `json:"type" yaml:"type" mapstructure:"type"`
}

// Live run output event from local agent
type RunEventMessage struct {
	// Epic being worked on
	EpicId string `json:"epicId" yaml:"epicId" mapstructure:"epicId"`

	// Event corresponds to the JSON schema field "event".
	Event RunEventData `json:"event" yaml:"event" mapstructure:"event"`

	// Source corresponds to the JSON schema field "source".
	Source RunEventSource `json:"source" yaml:"source" mapstructure:"source"`

	// Task ID (if task-level event)
	TaskId *string `json:"taskId,omitempty" yaml:"taskId,omitempty" mapstructure:"taskId,omitempty"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// Token and cost metrics during run
type RunEventMetrics struct {
	// CacheCreationTokens corresponds to the JSON schema field "cacheCreationTokens".
	CacheCreationTokens *int `json:"cacheCreationTokens,omitempty" yaml:"cacheCreationTokens,omitempty" mapstructure:"cacheCreationTokens,omitempty"`

	// CacheReadTokens corresponds to the JSON schema field "cacheReadTokens".
	CacheReadTokens *int `json:"cacheReadTokens,omitempty" yaml:"cacheReadTokens,omitempty" mapstructure:"cacheReadTokens,omitempty"`

	// CostUsd corresponds to the JSON schema field "costUsd".
	CostUsd *float64 `json:"costUsd,omitempty" yaml:"costUsd,omitempty" mapstructure:"costUsd,omitempty"`

	// DurationMs corresponds to the JSON schema field "durationMs".
	DurationMs *int `json:"durationMs,omitempty" yaml:"durationMs,omitempty" mapstructure:"durationMs,omitempty"`

	// InputTokens corresponds to the JSON schema field "inputTokens".
	InputTokens *int `json:"inputTokens,omitempty" yaml:"inputTokens,omitempty" mapstructure:"inputTokens,omitempty"`

	// OutputTokens corresponds to the JSON schema field "outputTokens".
	OutputTokens *int `json:"outputTokens,omitempty" yaml:"outputTokens,omitempty" mapstructure:"outputTokens,omitempty"`
}

type RunEventSource string

const RunEventSourceRalph RunEventSource = "ralph"
const RunEventSourceSwarmOrchestrator RunEventSource = "swarm-orchestrator"
const RunEventSourceSwarmSubagent RunEventSource = "swarm-subagent"

// Active tool information
type RunEventTool struct {
	// Duration corresponds to the JSON schema field "duration".
	Duration *int `json:"duration,omitempty" yaml:"duration,omitempty" mapstructure:"duration,omitempty"`

	// Input corresponds to the JSON schema field "input".
	Input *string `json:"input,omitempty" yaml:"input,omitempty" mapstructure:"input,omitempty"`

	// Name corresponds to the JSON schema field "name".
	Name string `json:"name" yaml:"name" mapstructure:"name"`
}

type RunEventType string

const RunEventTypeContextFailed RunEventType = "context-failed"
const RunEventTypeContextGenerated RunEventType = "context-generated"
const RunEventTypeContextGenerating RunEventType = "context-generating"
const RunEventTypeContextLoaded RunEventType = "context-loaded"
const RunEventTypeContextSkipped RunEventType = "context-skipped"
const RunEventTypeEpicCompleted RunEventType = "epic-completed"
const RunEventTypeEpicStarted RunEventType = "epic-started"
const RunEventTypeTaskCompleted RunEventType = "task-completed"
const RunEventTypeTaskStarted RunEventType = "task-started"
const RunEventTypeTaskUpdate RunEventType = "task-update"
const RunEventTypeToolActivity RunEventType = "tool-activity"

// Complete record of a finished agent run
type RunRecord struct {
	// ISO timestamp when the run ended
	EndedAt time.Time `json:"ended_at" yaml:"ended_at" mapstructure:"ended_at"`

	// Error message if the run failed
	ErrorMsg *string `json:"error_msg,omitempty" yaml:"error_msg,omitempty" mapstructure:"error_msg,omitempty"`

	// Token and cost metrics
	Metrics MetricsRecord `json:"metrics" yaml:"metrics" mapstructure:"metrics"`

	// Model used for the run (e.g., claude-sonnet-4-20250514)
	Model string `json:"model" yaml:"model" mapstructure:"model"`

	// Number of API round-trips
	NumTurns int `json:"num_turns" yaml:"num_turns" mapstructure:"num_turns"`

	// Final output text from the agent
	Output string `json:"output" yaml:"output" mapstructure:"output"`

	// Unique session identifier
	SessionId string `json:"session_id" yaml:"session_id" mapstructure:"session_id"`

	// ISO timestamp when the run started
	StartedAt time.Time `json:"started_at" yaml:"started_at" mapstructure:"started_at"`

	// Whether the run completed successfully
	Success bool `json:"success" yaml:"success" mapstructure:"success"`

	// Thinking/reasoning content (if extended thinking was used)
	Thinking *string `json:"thinking,omitempty" yaml:"thinking,omitempty" mapstructure:"thinking,omitempty"`

	// List of tool invocations during the run
	Tools []ToolRecord `json:"tools,omitempty" yaml:"tools,omitempty" mapstructure:"tools,omitempty"`

	// Verification results (if verification was run)
	Verification *VerificationRecord `json:"verification,omitempty" yaml:"verification,omitempty" mapstructure:"verification,omitempty"`
}

type RunStatus string

const RunStatusComplete RunStatus = "complete"
const RunStatusError RunStatus = "error"

// Response from GET /api/run-status/:epicId
type RunStatusResponse struct {
	// Status of currently executing task
	ActiveTask *ActiveTaskStatus `json:"activeTask,omitempty" yaml:"activeTask,omitempty" mapstructure:"activeTask,omitempty"`

	// Epic being queried
	EpicId string `json:"epicId" yaml:"epicId" mapstructure:"epicId"`

	// Whether there is an active run for this epic
	IsRunning bool `json:"isRunning" yaml:"isRunning" mapstructure:"isRunning"`

	// Live run metrics
	Metrics *LiveRecord `json:"metrics,omitempty" yaml:"metrics,omitempty" mapstructure:"metrics,omitempty"`
}

const RunStatusStarting RunStatus = "starting"
const RunStatusThinking RunStatus = "thinking"
const RunStatusToolUse RunStatus = "tool_use"
const RunStatusWriting RunStatus = "writing"

// Union of all messages sent from server/DO to clients
type ServerMessage interface{}

// Full tick state on connection
type StateFullMessage struct {
	// Ticks corresponds to the JSON schema field "ticks".
	Ticks StateFullMessageTicks `json:"ticks" yaml:"ticks" mapstructure:"ticks"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

type StateFullMessageTicks map[string]TickSchema_1

// Local agent sends full tick state to DO
type SyncFullMessage struct {
	// Ticks corresponds to the JSON schema field "ticks".
	Ticks SyncFullMessageTicks `json:"ticks" yaml:"ticks" mapstructure:"ticks"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

type SyncFullMessageTicks map[string]TickSchema_1

type TickAwaiting string

const TickAwaitingApproval TickAwaiting = "approval"
const TickAwaitingCheckpoint TickAwaiting = "checkpoint"
const TickAwaitingContent TickAwaiting = "content"
const TickAwaitingEscalation TickAwaiting = "escalation"
const TickAwaitingInput TickAwaiting = "input"
const TickAwaitingReview TickAwaiting = "review"
const TickAwaitingWork TickAwaiting = "work"

type TickColumn string

const TickColumnAgent TickColumn = "agent"
const TickColumnBlocked TickColumn = "blocked"
const TickColumnDone TickColumn = "done"
const TickColumnHuman TickColumn = "human"
const TickColumnReady TickColumn = "ready"

// Client request to create tick
type TickCreateRequest struct {
	// Tick corresponds to the JSON schema field "tick".
	Tick TickSchema_1 `json:"tick" yaml:"tick" mapstructure:"tick"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// Client request to delete tick
type TickDeleteRequest struct {
	// Id corresponds to the JSON schema field "id".
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// Tick deleted
type TickDeletedMessage struct {
	// Id corresponds to the JSON schema field "id".
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// RPC request for tick operation
type TickOperationRequest struct {
	// Operation corresponds to the JSON schema field "operation".
	Operation TickOperationType `json:"operation" yaml:"operation" mapstructure:"operation"`

	// Payload corresponds to the JSON schema field "payload".
	Payload *TickOperationRequestPayload `json:"payload,omitempty" yaml:"payload,omitempty" mapstructure:"payload,omitempty"`

	// RequestId corresponds to the JSON schema field "requestId".
	RequestId string `json:"requestId" yaml:"requestId" mapstructure:"requestId"`

	// TickId corresponds to the JSON schema field "tickId".
	TickId string `json:"tickId" yaml:"tickId" mapstructure:"tickId"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

type TickOperationRequestPayload struct {
	// Message corresponds to the JSON schema field "message".
	Message *string `json:"message,omitempty" yaml:"message,omitempty" mapstructure:"message,omitempty"`

	// Reason corresponds to the JSON schema field "reason".
	Reason *string `json:"reason,omitempty" yaml:"reason,omitempty" mapstructure:"reason,omitempty"`
}

// RPC response for tick operation
type TickOperationResponse struct {
	// Error corresponds to the JSON schema field "error".
	Error *string `json:"error,omitempty" yaml:"error,omitempty" mapstructure:"error,omitempty"`

	// RequestId corresponds to the JSON schema field "requestId".
	RequestId string `json:"requestId" yaml:"requestId" mapstructure:"requestId"`

	// Success corresponds to the JSON schema field "success".
	Success bool `json:"success" yaml:"success" mapstructure:"success"`

	// Tick corresponds to the JSON schema field "tick".
	Tick *TickSchema_1 `json:"tick,omitempty" yaml:"tick,omitempty" mapstructure:"tick,omitempty"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

type TickOperationType string

const TickOperationTypeAddNote TickOperationType = "add_note"
const TickOperationTypeApprove TickOperationType = "approve"
const TickOperationTypeClose TickOperationType = "close"
const TickOperationTypeReject TickOperationType = "reject"
const TickOperationTypeReopen TickOperationType = "reopen"

type TickRequires string

const TickRequiresApproval TickRequires = "approval"
const TickRequiresContent TickRequires = "content"
const TickRequiresReview TickRequires = "review"

// Tick with computed board fields (used in list responses)
type TickResponse struct {
	// Criteria that must be met for completion
	AcceptanceCriteria *string `json:"acceptance_criteria,omitempty" yaml:"acceptance_criteria,omitempty" mapstructure:"acceptance_criteria,omitempty"`

	// Current wait state - what the tick is waiting for
	Awaiting *TickAwaiting `json:"awaiting,omitempty" yaml:"awaiting,omitempty" mapstructure:"awaiting,omitempty"`

	// IDs of ticks that block this one
	BlockedBy []string `json:"blocked_by,omitempty" yaml:"blocked_by,omitempty" mapstructure:"blocked_by,omitempty"`

	// ISO timestamp when the tick was closed
	ClosedAt *time.Time `json:"closed_at,omitempty" yaml:"closed_at,omitempty" mapstructure:"closed_at,omitempty"`

	// Reason for closing (e.g., completed, wont-fix, duplicate)
	ClosedReason *string `json:"closed_reason,omitempty" yaml:"closed_reason,omitempty" mapstructure:"closed_reason,omitempty"`

	// Computed kanban column
	Column TickColumn `json:"column" yaml:"column" mapstructure:"column"`

	// ISO timestamp when the tick was created
	CreatedAt time.Time `json:"created_at" yaml:"created_at" mapstructure:"created_at"`

	// Who created this tick
	CreatedBy string `json:"created_by" yaml:"created_by" mapstructure:"created_by"`

	// ISO timestamp - tick is deferred until this time
	DeferUntil *time.Time `json:"defer_until,omitempty" yaml:"defer_until,omitempty" mapstructure:"defer_until,omitempty"`

	// Detailed description of the work to be done
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// ID of tick during which this tick was discovered
	DiscoveredFrom *string `json:"discovered_from,omitempty" yaml:"discovered_from,omitempty" mapstructure:"discovered_from,omitempty"`

	// Reference to external issue tracker (e.g., GitHub issue URL)
	ExternalRef *string `json:"external_ref,omitempty" yaml:"external_ref,omitempty" mapstructure:"external_ref,omitempty"`

	// Unique identifier for the tick
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Whether this tick is blocked by unresolved dependencies
	IsBlocked bool `json:"isBlocked" yaml:"isBlocked" mapstructure:"isBlocked"`

	// Optional labels for categorization
	Labels []string `json:"labels,omitempty" yaml:"labels,omitempty" mapstructure:"labels,omitempty"`

	// Legacy field - use awaiting instead. True means awaiting=work
	Manual *bool `json:"manual,omitempty" yaml:"manual,omitempty" mapstructure:"manual,omitempty"`

	// Timestamped notes appended during work
	Notes *string `json:"notes,omitempty" yaml:"notes,omitempty" mapstructure:"notes,omitempty"`

	// Who is responsible for this tick (agent or human)
	Owner string `json:"owner" yaml:"owner" mapstructure:"owner"`

	// Parent epic ID if this tick belongs to an epic
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (0=highest, 4=lowest)
	Priority int `json:"priority" yaml:"priority" mapstructure:"priority"`

	// Pre-declared gate that must be satisfied before closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// ISO timestamp when the tick entered in_progress status
	StartedAt *time.Time `json:"started_at,omitempty" yaml:"started_at,omitempty" mapstructure:"started_at,omitempty"`

	// Status corresponds to the JSON schema field "status".
	Status TickStatus `json:"status" yaml:"status" mapstructure:"status"`

	// Short title describing the work item
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type corresponds to the JSON schema field "type".
	Type TickType `json:"type" yaml:"type" mapstructure:"type"`

	// ISO timestamp when the tick was last updated
	UpdatedAt time.Time `json:"updated_at" yaml:"updated_at" mapstructure:"updated_at"`

	// Human response to an awaiting state
	Verdict *TickVerdict `json:"verdict,omitempty" yaml:"verdict,omitempty" mapstructure:"verdict,omitempty"`

	// Verification status (for closed tasks only)
	VerificationStatus *VerificationStatus `json:"verificationStatus,omitempty" yaml:"verificationStatus,omitempty" mapstructure:"verificationStatus,omitempty"`
}

// A single work item (task, bug, feature, epic, or chore)
type TickSchema struct {
	// Criteria that must be met for completion
	AcceptanceCriteria *string `json:"acceptance_criteria,omitempty" yaml:"acceptance_criteria,omitempty" mapstructure:"acceptance_criteria,omitempty"`

	// Current wait state - what the tick is waiting for
	Awaiting *TickAwaiting `json:"awaiting,omitempty" yaml:"awaiting,omitempty" mapstructure:"awaiting,omitempty"`

	// IDs of ticks that block this one
	BlockedBy []string `json:"blocked_by,omitempty" yaml:"blocked_by,omitempty" mapstructure:"blocked_by,omitempty"`

	// ISO timestamp when the tick was closed
	ClosedAt *time.Time `json:"closed_at,omitempty" yaml:"closed_at,omitempty" mapstructure:"closed_at,omitempty"`

	// Reason for closing (e.g., completed, wont-fix, duplicate)
	ClosedReason *string `json:"closed_reason,omitempty" yaml:"closed_reason,omitempty" mapstructure:"closed_reason,omitempty"`

	// ISO timestamp when the tick was created
	CreatedAt time.Time `json:"created_at" yaml:"created_at" mapstructure:"created_at"`

	// Who created this tick
	CreatedBy string `json:"created_by" yaml:"created_by" mapstructure:"created_by"`

	// ISO timestamp - tick is deferred until this time
	DeferUntil *time.Time `json:"defer_until,omitempty" yaml:"defer_until,omitempty" mapstructure:"defer_until,omitempty"`

	// Detailed description of the work to be done
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// ID of tick during which this tick was discovered
	DiscoveredFrom *string `json:"discovered_from,omitempty" yaml:"discovered_from,omitempty" mapstructure:"discovered_from,omitempty"`

	// Reference to external issue tracker (e.g., GitHub issue URL)
	ExternalRef *string `json:"external_ref,omitempty" yaml:"external_ref,omitempty" mapstructure:"external_ref,omitempty"`

	// Unique identifier for the tick
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Optional labels for categorization
	Labels []string `json:"labels,omitempty" yaml:"labels,omitempty" mapstructure:"labels,omitempty"`

	// Legacy field - use awaiting instead. True means awaiting=work
	Manual *bool `json:"manual,omitempty" yaml:"manual,omitempty" mapstructure:"manual,omitempty"`

	// Timestamped notes appended during work
	Notes *string `json:"notes,omitempty" yaml:"notes,omitempty" mapstructure:"notes,omitempty"`

	// Who is responsible for this tick (agent or human)
	Owner string `json:"owner" yaml:"owner" mapstructure:"owner"`

	// Parent epic ID if this tick belongs to an epic
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (0=highest, 4=lowest)
	Priority int `json:"priority" yaml:"priority" mapstructure:"priority"`

	// Pre-declared gate that must be satisfied before closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// ISO timestamp when the tick entered in_progress status
	StartedAt *time.Time `json:"started_at,omitempty" yaml:"started_at,omitempty" mapstructure:"started_at,omitempty"`

	// Status corresponds to the JSON schema field "status".
	Status TickStatus `json:"status" yaml:"status" mapstructure:"status"`

	// Short title describing the work item
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type corresponds to the JSON schema field "type".
	Type TickType `json:"type" yaml:"type" mapstructure:"type"`

	// ISO timestamp when the tick was last updated
	UpdatedAt time.Time `json:"updated_at" yaml:"updated_at" mapstructure:"updated_at"`

	// Human response to an awaiting state
	Verdict *TickVerdict `json:"verdict,omitempty" yaml:"verdict,omitempty" mapstructure:"verdict,omitempty"`
}

// A single work item (task, bug, feature, epic, or chore)
type TickSchema_1 struct {
	// Criteria that must be met for completion
	AcceptanceCriteria *string `json:"acceptance_criteria,omitempty" yaml:"acceptance_criteria,omitempty" mapstructure:"acceptance_criteria,omitempty"`

	// Current wait state - what the tick is waiting for
	Awaiting *TickAwaiting `json:"awaiting,omitempty" yaml:"awaiting,omitempty" mapstructure:"awaiting,omitempty"`

	// IDs of ticks that block this one
	BlockedBy []string `json:"blocked_by,omitempty" yaml:"blocked_by,omitempty" mapstructure:"blocked_by,omitempty"`

	// ISO timestamp when the tick was closed
	ClosedAt *time.Time `json:"closed_at,omitempty" yaml:"closed_at,omitempty" mapstructure:"closed_at,omitempty"`

	// Reason for closing (e.g., completed, wont-fix, duplicate)
	ClosedReason *string `json:"closed_reason,omitempty" yaml:"closed_reason,omitempty" mapstructure:"closed_reason,omitempty"`

	// ISO timestamp when the tick was created
	CreatedAt time.Time `json:"created_at" yaml:"created_at" mapstructure:"created_at"`

	// Who created this tick
	CreatedBy string `json:"created_by" yaml:"created_by" mapstructure:"created_by"`

	// ISO timestamp - tick is deferred until this time
	DeferUntil *time.Time `json:"defer_until,omitempty" yaml:"defer_until,omitempty" mapstructure:"defer_until,omitempty"`

	// Detailed description of the work to be done
	Description *string `json:"description,omitempty" yaml:"description,omitempty" mapstructure:"description,omitempty"`

	// ID of tick during which this tick was discovered
	DiscoveredFrom *string `json:"discovered_from,omitempty" yaml:"discovered_from,omitempty" mapstructure:"discovered_from,omitempty"`

	// Reference to external issue tracker (e.g., GitHub issue URL)
	ExternalRef *string `json:"external_ref,omitempty" yaml:"external_ref,omitempty" mapstructure:"external_ref,omitempty"`

	// Unique identifier for the tick
	Id string `json:"id" yaml:"id" mapstructure:"id"`

	// Optional labels for categorization
	Labels []string `json:"labels,omitempty" yaml:"labels,omitempty" mapstructure:"labels,omitempty"`

	// Legacy field - use awaiting instead. True means awaiting=work
	Manual *bool `json:"manual,omitempty" yaml:"manual,omitempty" mapstructure:"manual,omitempty"`

	// Timestamped notes appended during work
	Notes *string `json:"notes,omitempty" yaml:"notes,omitempty" mapstructure:"notes,omitempty"`

	// Who is responsible for this tick (agent or human)
	Owner string `json:"owner" yaml:"owner" mapstructure:"owner"`

	// Parent epic ID if this tick belongs to an epic
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// Priority level (0=highest, 4=lowest)
	Priority int `json:"priority" yaml:"priority" mapstructure:"priority"`

	// Pre-declared gate that must be satisfied before closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// ISO timestamp when the tick entered in_progress status
	StartedAt *time.Time `json:"started_at,omitempty" yaml:"started_at,omitempty" mapstructure:"started_at,omitempty"`

	// Status corresponds to the JSON schema field "status".
	Status TickStatus `json:"status" yaml:"status" mapstructure:"status"`

	// Short title describing the work item
	Title string `json:"title" yaml:"title" mapstructure:"title"`

	// Type corresponds to the JSON schema field "type".
	Type TickType `json:"type" yaml:"type" mapstructure:"type"`

	// ISO timestamp when the tick was last updated
	UpdatedAt time.Time `json:"updated_at" yaml:"updated_at" mapstructure:"updated_at"`

	// Human response to an awaiting state
	Verdict *TickVerdict `json:"verdict,omitempty" yaml:"verdict,omitempty" mapstructure:"verdict,omitempty"`
}

type TickStatus string

const TickStatusClosed TickStatus = "closed"
const TickStatusInProgress TickStatus = "in_progress"
const TickStatusOpen TickStatus = "open"

type TickType string

const TickTypeBug TickType = "bug"
const TickTypeChore TickType = "chore"
const TickTypeEpic TickType = "epic"
const TickTypeFeature TickType = "feature"
const TickTypeTask TickType = "task"

// Client request to update tick
type TickUpdateRequest struct {
	// Tick corresponds to the JSON schema field "tick".
	Tick TickSchema_1 `json:"tick" yaml:"tick" mapstructure:"tick"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

// Single tick created or updated
type TickUpdatedMessage struct {
	// Tick corresponds to the JSON schema field "tick".
	Tick TickSchema_1 `json:"tick" yaml:"tick" mapstructure:"tick"`

	// Type corresponds to the JSON schema field "type".
	Type interface{} `json:"type" yaml:"type" mapstructure:"type"`
}

type TickVerdict string

const TickVerdictApproved TickVerdict = "approved"
const TickVerdictRejected TickVerdict = "rejected"

// Record of a single tool invocation
type ToolRecord struct {
	// Tool execution duration in milliseconds
	DurationMs int `json:"duration_ms" yaml:"duration_ms" mapstructure:"duration_ms"`

	// Tool input (may be truncated)
	Input *string `json:"input,omitempty" yaml:"input,omitempty" mapstructure:"input,omitempty"`

	// Whether the tool invocation resulted in an error
	IsError *bool `json:"is_error,omitempty" yaml:"is_error,omitempty" mapstructure:"is_error,omitempty"`

	// Name of the tool that was invoked
	Name string `json:"name" yaml:"name" mapstructure:"name"`

	// Tool output (may be truncated)
	Output *string `json:"output,omitempty" yaml:"output,omitempty" mapstructure:"output,omitempty"`
}

// Request body for PATCH /api/ticks/:id
type UpdateTickRequest struct {
	// New owner
	Owner *string `json:"owner,omitempty" yaml:"owner,omitempty" mapstructure:"owner,omitempty"`

	// New parent epic ID
	Parent *string `json:"parent,omitempty" yaml:"parent,omitempty" mapstructure:"parent,omitempty"`

	// New priority level
	Priority *int `json:"priority,omitempty" yaml:"priority,omitempty" mapstructure:"priority,omitempty"`

	// Pre-declared gate for closing
	Requires *TickRequires `json:"requires,omitempty" yaml:"requires,omitempty" mapstructure:"requires,omitempty"`

	// New tick type
	Type *TickType `json:"type,omitempty" yaml:"type,omitempty" mapstructure:"type,omitempty"`
}

// Aggregated verification results for a run
type VerificationRecord struct {
	// Whether all verifiers passed
	AllPassed bool `json:"all_passed" yaml:"all_passed" mapstructure:"all_passed"`

	// Individual verifier results
	Results []VerifierResult `json:"results,omitempty" yaml:"results,omitempty" mapstructure:"results,omitempty"`
}

type VerificationStatus string

const VerificationStatusFailed VerificationStatus = "failed"
const VerificationStatusPending VerificationStatus = "pending"
const VerificationStatusVerified VerificationStatus = "verified"

// Result from a single verifier
type VerifierResult struct {
	// Verifier execution duration in milliseconds
	DurationMs int `json:"duration_ms" yaml:"duration_ms" mapstructure:"duration_ms"`

	// Error message if verification failed due to an error
	Error *string `json:"error,omitempty" yaml:"error,omitempty" mapstructure:"error,omitempty"`

	// Verifier output (may be truncated)
	Output *string `json:"output,omitempty" yaml:"output,omitempty" mapstructure:"output,omitempty"`

	// Whether this verifier passed
	Passed bool `json:"passed" yaml:"passed" mapstructure:"passed"`

	// Name of the verifier (e.g., git, test)
	Verifier string `json:"verifier" yaml:"verifier" mapstructure:"verifier"`
}
